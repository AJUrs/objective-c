//
//  PNHistoryTestCase.m
//  PubNub Tests
//
//  Created by Jordan Zucker on 5/13/16.
//
//

#import <PubNubTesting/PubNubTesting.h>

@interface PNHistoryTestCase : PNTClientTestCase
@end

@implementation PNHistoryTestCase

- (BOOL)isRecording {
    return NO;
}

- (void)setUp {
    [super setUp];
    // Put setup code here. This method is called before the invocation of each test method in the class.
}

- (void)tearDown {
    // Put teardown code here. This method is called after the invocation of each test method in the class.
    [super tearDown];
}

- (NSString *)historyChannel {
    return @"a";
}

- (void)testGetHistory {
    // This is an example of a functional test case.
    // Use XCTAssert and related functions to verify your tests produce the correct results.
    NSArray *messages = @[
                          @123,
                          @"*************.. 570 - 2016-06-17 16:22:01",
                          @123,
                          @"**************. 571 - 2016-06-17 16:23:05",
                          @123,
                          @"*************** 572 - 2016-06-17 16:24:10",
                          @123,
                          @"*.............. 573 - 2016-06-17 16:25:14",
                          @123,
                          @"**............. 574 - 2016-06-17 16:26:18",
                          @123,
                          @"***............ 575 - 2016-06-17 16:27:23",
                          @123,
                          @"****........... 576 - 2016-06-17 16:28:27",
                          @123,
                          @"*****.......... 577 - 2016-06-17 16:29:31",
                          @123,
                          @"******......... 578 - 2016-06-17 16:30:36",
                          @123,
                          @"*******........ 579 - 2016-06-17 16:31:40",
                          @123,
                          @123,
                          @"********....... 580 - 2016-06-17 16:32:44",
                          @123,
                          @"*********...... 581 - 2016-06-17 16:33:49",
                          @123,
                          @"**********..... 582 - 2016-06-17 16:34:53",
                          @123,
                          @"***********.... 583 - 2016-06-17 16:35:57",
                          @123,
                          @"************... 584 - 2016-06-17 16:37:02",
                          @123,
                          @"*************.. 585 - 2016-06-17 16:38:06",
                          @123,
                          @"**************. 586 - 2016-06-17 16:39:10",
                          @123,
                          @"*************** 587 - 2016-06-17 16:40:15",
                          @123,
                          @"*.............. 588 - 2016-06-17 16:41:19",
                          @123,
                          @"**............. 589 - 2016-06-17 16:42:23",
                          @123,
                          @"***............ 590 - 2016-06-17 16:43:28",
                          @123,
                          @"****........... 591 - 2016-06-17 16:44:32",
                          @123,
                          @"*****.......... 592 - 2016-06-17 16:45:36",
                          @123,
                          @"******......... 593 - 2016-06-17 16:46:41",
                          @123,
                          @123,
                          @"*******........ 594 - 2016-06-17 16:47:45",
                          @123,
                          @"********....... 595 - 2016-06-17 16:48:49",
                          @123,
                          @"*********...... 596 - 2016-06-17 16:49:54",
                          @123,
                          @"**********..... 597 - 2016-06-17 16:50:58",
                          @123,
                          @"***********.... 598 - 2016-06-17 16:52:02",
                          @123,
                          @"************... 599 - 2016-06-17 16:53:07",
                          @123,
                          @"*************.. 600 - 2016-06-17 16:54:11",
                          @123,
                          @"**************. 601 - 2016-06-17 16:55:15",
                          @123,
                          @"*************** 602 - 2016-06-17 16:56:20",
                          @123,
                          @"*.............. 603 - 2016-06-17 16:57:24",
                          @123,
                          @"**............. 604 - 2016-06-17 16:58:28",
                          @123,
                          @"***............ 605 - 2016-06-17 16:59:32",
                          @123,
                          @"****........... 606 - 2016-06-17 17:00:37",
                          @123,
                          @"*****.......... 607 - 2016-06-17 17:01:41",
                          @123,
                          @123,
                          @"******......... 608 - 2016-06-17 17:02:46",
                          @123,
                          @"*******........ 609 - 2016-06-17 17:03:50",
                          @123,
                          @"********....... 610 - 2016-06-17 17:04:54",
                          @123,
                          @"*********...... 611 - 2016-06-17 17:05:58",
                          @123,
                          @"**********..... 612 - 2016-06-17 17:07:03",
                          @123,
                          @"***********.... 613 - 2016-06-17 17:08:07",
                          @123,
                          @"************... 614 - 2016-06-17 17:09:11",
                          @123,
                          @"*************.. 615 - 2016-06-17 17:10:16",
                          @123,
                          @"**************. 616 - 2016-06-17 17:11:20",
                          @123,
                          @"*************** 617 - 2016-06-17 17:12:24",
                          @123,
                          ];
    PNTTestHistoryResult *expectedResult = [PNTTestHistoryResult successfulResultWithClient:self.client statusCode:200 start:@14662057033010763 end:@14662087633164489 messages:messages];
    [self.client historyForChannel:self.historyChannel withCompletion:[self PNT_historyCompletionBlockWithHistoryResult:expectedResult andError:nil]];
    [self waitFor:kPNTHistoryTimeout];
}

@end
